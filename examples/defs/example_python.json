{
  "format": "auditable-notebook",
  "v": 1,
  "title": "python mode",
  "cells": [
    {
      "type": "code",
      "collapsed": true,
      "code": "// %collapsed\nworkshop([\n  {\n    title: 'Python mode',\n    content: md`This is a guided **workshop** for this notebook.\nUse the **prev** and **next** buttons below to navigate\nbetween pages, or click the progress dots to jump directly.\n\nClose this panel with the **\\u00d7** button. Reopen it\nanytime with the **workshop** tab on the right edge\nof the screen.`\n  },\n  {\n    title: 'Virtual modules',\n    content: md`\\`load(\"@python\")\\` imports a **virtual\nmodule** \\u2014 it\\u2019s not a URL, it\\u2019s a built-in module\nbundled with auditable. Virtual modules use the\n\\`@\\` prefix: \\`@python\\`, \\`@std\\`, \\`@python/this\\`.\n\nThe Python module provides \\`range\\`, \\`enumerate\\`,\n\\`sorted\\`, \\`reversed\\`, \\`len\\`, and other Python-like\nutilities that work on JavaScript arrays and\niterables.`\n  },\n  {\n    title: 'Pythonic JavaScript',\n    content: md`The imported functions make JS read like\nPython: \\`for (const [i, x] of enumerate(arr))\\`,\n\\`sorted(data, key)\\`, \\`range(0, 10, 2)\\`.\n\nSemicolons are optional in JS (the engine inserts\nthem via ASI). This example omits them for a more\nPythonic feel. \\`print\\` is a built-in alias for\n\\`ui.display\\` \\u2014 no import needed.`\n  },\n  {\n    title: 'The std library',\n    content: md`Every cell receives \\`std\\` as an injected\nparameter. It provides statistical functions:\n\\`std.mean\\`, \\`std.median\\`, \\`std.extent\\`,\n\\`std.sum\\`, \\`std.bin\\`, \\`std.linspace\\`, and more.\n\nYou can also \\`load(\"@std\")\\` to destructure specific\nfunctions. The \\`std\\` object and \\`@python\\`\ncomplement each other \\u2014 Python-style iteration\nplus statistical aggregation.`\n  },\n])"
    },
    {
      "type": "md",
      "code": "# python mode\n\n`load(\"@python\")` gives you `range`, `enumerate`, `sorted`, `reversed`, `len` and more — so your JS can read like Python. `print` is a built-in alias for `ui.display`.\n\nnote: semicolons are idiomatic JS but not required — the browser engine inserts them automatically (ASI). this example skips them for a more pythonic feel."
    },
    {
      "type": "code",
      "code": "const { range, enumerate, sorted, reversed, len } = await load(\"@python\")"
    },
    {
      "type": "code",
      "code": "// generate some fake sensor data\nconst sensors = []\nfor (const i of range(20)) {\n  sensors.push({\n    id: `sensor-${i}`,\n    temp: 18 + Math.random() * 15,\n    humidity: 30 + Math.random() * 60,\n    active: Math.random() > 0.2\n  })\n}\n\nprint(`generated ${len(sensors)} sensors`)"
    },
    {
      "type": "code",
      "code": "// filter & sort — pythonic style\nconst active = sensors.filter(s => s.active)\nconst by_temp = sorted(active, s => s.temp)\nconst by_temp_desc = reversed(by_temp)\n\nprint(`${len(active)} of ${len(sensors)} sensors active`)\nprint(`coldest: ${by_temp[0].id} at ${by_temp[0].temp.toFixed(1)}\\u00b0C`)\nprint(`hottest: ${by_temp_desc[0].id} at ${by_temp_desc[0].temp.toFixed(1)}\\u00b0C`)"
    },
    {
      "type": "code",
      "code": "// enumerate for indexed iteration\nconst top5 = by_temp_desc.slice(0, 5)\n\nprint(\"\\n\\u2014 top 5 hottest sensors \\u2014\")\nfor (const [i, s] of enumerate(top5)) {\n  print(`  ${i + 1}. ${s.id}  ${s.temp.toFixed(1)}\\u00b0C  ${s.humidity.toFixed(0)}% RH`)\n}"
    },
    {
      "type": "code",
      "code": "// combine with std for stats\nprint(`\\nmean temp:   ${std.mean(active, s => s.temp).toFixed(1)}\\u00b0C`)\nprint(`median temp: ${std.median(active, s => s.temp).toFixed(1)}\\u00b0C`)\n\nconst [lo, hi] = std.extent(active, s => s.humidity)\nprint(`humidity range: ${lo.toFixed(0)}% \\u2013 ${hi.toFixed(0)}%`)"
    },
    {
      "type": "code",
      "code": "// range for quick sequences\nprint(\"range(5):         \" + range(5))\nprint(\"range(2, 8):      \" + range(2, 8))\nprint(\"range(0, 20, 3):  \" + range(0, 20, 3))\nprint(\"range(10, 0, -2): \" + range(10, 0, -2))"
    },
    {
      "type": "code",
      "code": "// the easter egg\nawait load(\"@python/this\")"
    }
  ],
  "settings": {
    "theme": "dark",
    "fontSize": 13,
    "width": "860"
  }
}
