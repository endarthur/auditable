{
  "format": "auditable-notebook",
  "v": 1,
  "title": "stereonet",
  "cells": [
    {
      "type": "code",
      "collapsed": true,
      "code": "// %collapsed\nworkshop([\n  {\n    title: 'Stereonet',\n    content: md`This is a guided **workshop** for this notebook.\nUse the **prev** and **next** buttons below to navigate\nbetween pages, or click the progress dots to jump directly.\n\nClose this panel with the **\\u00d7** button. Reopen it\nanytime with the **workshop** tab on the right edge\nof the screen.`\n  },\n  {\n    title: 'Loading external modules',\n    content: md`\\`load(url)\\` imports an ES module at runtime\nand caches it for the session. Here it fetches\n\\`@gcu/bearing\\` from esm.sh.\n\nUnlike \\`install()\\`, \\`load()\\` doesn\\u2019t embed the\nsource in the HTML \\u2014 it requires network access\neach session. Use \\`load()\\` for libraries you don\\u2019t\nneed offline, or during development before committing\nto \\`install()\\`.`\n  },\n  {\n    title: 'Reactive checkboxes & sliders',\n    content: md`\\`ui.checkbox(label, default)\\` and\n\\`ui.slider(label, default, opts)\\` are **reactive\nwidgets** \\u2014 no \\`onInput\\` callback, so changing them\nre-runs the cell and all dependents.\n\nThe render cell reads \\`showPlanes\\`, \\`showPoles\\`,\n\\`trend\\`, and \\`plunge\\`. Toggle a checkbox \\u2192 the\nrender cell re-runs \\u2192 the stereonet updates.\nThe DAG handles the propagation.`\n  },\n  {\n    title: 'Multi-cell structure',\n    content: md`The data (\\`planes\\`, \\`fault\\`) lives in\nits own cell, separate from controls and rendering.\nThis is a common auditable pattern:\n**data \\u2192 controls \\u2192 computation \\u2192 display**.\n\nEach cell defines \\`const\\` values that downstream\ncells consume. Editing the planes array and pressing\nCtrl+Enter re-runs only the cells that depend on it.`\n  },\n])"
    },
    {
      "type": "md",
      "code": "# interactive stereonet\n\nusing `@gcu/bearing` to plot structural geology data on an equal-area stereonet. try changing the measurements or rotating the view."
    },
    {
      "type": "code",
      "code": "const { Stereonet } = await load(\"https://esm.sh/@gcu/bearing\");"
    },
    {
      "type": "code",
      "code": "// bedding planes â€” strike/dip (right-hand rule)\nconst planes = [\n  [120, 35], [125, 40], [118, 32],\n  [130, 38], [115, 30], [122, 42],\n  [128, 36], [117, 33], [135, 45],\n];\n\n// a fault\nconst fault = [210, 65];"
    },
    {
      "type": "code",
      "code": "const trend = ui.slider(\"view trend\", 0, {min:0, max:360, step:5});\nconst plunge = ui.slider(\"view plunge\", 90, {min:0, max:90, step:5});\nconst showPlanes = ui.checkbox(\"great circles\", true);\nconst showPoles = ui.checkbox(\"poles\", true);"
    },
    {
      "type": "code",
      "code": "const s = new Stereonet({ size: 500, projection: 'equal-area' });\n\nif (trend !== 0 || plunge !== 90) {\n  s.setCenter(trend, plunge);\n}\n\nif (showPlanes) {\n  for (const [strike, dip] of planes) {\n    s.plane(strike, dip);\n  }\n  s.plane(fault[0], fault[1], { color: '#c33', width: 2 });\n}\n\nif (showPoles) {\n  for (const [strike, dip] of planes) {\n    s.pole(strike, dip);\n  }\n  s.pole(fault[0], fault[1], { color: '#c33', radius: 5 });\n}\n\ns.render();\nui.display(s.element());\nui.display(`${planes.length} bedding planes + 1 fault \\u00b7 view: ${trend}/${plunge}`);"
    }
  ],
  "settings": {
    "theme": "dark",
    "fontSize": 13,
    "width": "860"
  }
}
